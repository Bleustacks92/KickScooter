# KickScooter

Прошивка для двух отдельных плат гироскутера.

## Среда программирования
* Keil uVision 5
* PureBasic

## Возможности
* Выбор режима работы (Синус, Блочный)
* Ограничение максимального тока
* Тип входного задания (Напряжение, ток, скорость)
* Ослабление поля
* Пределы аккумулятора

## Поддержка проекта
* Все актуальные новости о проекте можно узнать в [Телеграмм](https://t.me/kickscootergreenbytes) канале [KickScooterGreenBytes](https://t.me/kickscootergreenbytes).
* Обсуждение актуальных вопросов, поддержка, помощь в [Телеграмм](https://t.me/kickscootergreenbyteschat) чате [KickScooterGreenBytesChat](https://t.me/kickscootergreenbyteschat).

## Поддержка микроконтроллеров
* GD32F130C8T6
* GD32F130C6T6

## ПО настроки параметров

Прошивка поддерживает подключение и управление с ПК при помощи ПО.
Подключение платы к ПО осуществляется одним из двух способов:
* USB TTL (UART)
* ST Link V2

![image](https://user-images.githubusercontent.com/26708521/199352272-a9f15ab4-c299-4762-85b6-0bc0387e5ff7.png)

## Поддержка плат
Для полноценной поддержки платы необходимо выполнить минимальные изменения платы, изменения показаны в картинках
### Плата №1
![1](https://sun9-84.userapi.com/impg/5SXeSNaMzodqguP0dNTbCvyAMhvdGz1p_XtkLg/Cmp-4AYB1xM.jpg?size=1280x823&quality=96&sign=206d82daabf53f4df6479608b14fd579&type=album)
### Плата №3
![3](https://sun9-85.userapi.com/impg/-Oo03WbO33WaLMrroqLN0_uC7O8S0LyBlMnPMQ/5zxsmXROUe0.jpg?size=1253x882&quality=96&sign=ded97e2cb80f117727760b723d7192bb&type=album)
### Органы управления
![Тормоз](https://sun9-39.userapi.com/impg/Rg4Y0EVmBSHs-MAk0PJ57moxgGaHBhT9asDBig/0zXGYG4Y1fA.jpg?size=1130x698&quality=96&sign=94c8e4864a59dfbd5ff2782a836d0c9c&type=album)
![Газ](https://sun9-43.userapi.com/impg/XtbTdIYMpE13m8X2iQ1LtLkc-vMqbJ0SBVnJlQ/uwUWNvQVMhI.jpg?size=835x516&quality=96&sign=86b033c0b2691c392629924353d61860&type=album)

## Прошивка плат
Прошивка платы осуществляется программатором ST LinkV2 и программой STM32 ST-LINK Utility, при компиляции из Keil загрузка в плату произведется в автоматическом режиме.

* Перед загрузкой прошивки убедитесь что плата отключена от источника питания и аккумуляторной батареи.

### Определение типа платы
В папке bin\Hex есть несколько файлов, каждый файл предназначен для конкретной платы и микроконтроллера

* 0x1A = Первая плата микроконтроллер GD32F130C8T6
* 0x1B = Первая плата микроконтроллер GD32F130C6T6
* 0x2A = Вторая плата микроконтроллер GD32F130C8T6
* 0x2B = Вторая плата микроконтроллер GD32F130C6T6
* 0x3A = Третья плата микроконтроллер GD32F130C8T6
* 0x3B = Третья плата микроконтроллер GD32F130C6T6

В программе при подключении (во вкладке подключение) необходимо указать размер памяти для микроконтроллера GD32F130T6C6 = 0x7D00

### Калибровка платы
После прошивки платы, изменения платы, подключения органов управления и двигателя необходимо плату откалибровать для нормальной работы.

* #### Перед калибровкой платы необходимо надежно закрепить двигатель
* Подключаем источник питания и/или аккумуляторную батарею
* На отключенном устройстве нажимаем и держим до характерного сигнала кнопку включения
* Повторно нажимаем и держим до характерного сигнала кнопку включения
* Нажимаем на курок газа и тормоза для определения пределов и однократно нажимаем кнопку включения
* Ожидаем вращения двигателя в нужную нам сторону и однократно нажимаем на кнопку включения
* Калибровка завершена

Для более детальной настройки конфигурации платы необходимо подключить плату к компьютеру.
